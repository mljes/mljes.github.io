<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8">

        <title>Upgrader</title>
        <meta
            name="description"
            content="Calculates UPick upgrade prices per seat">
        <meta
            name="author"
            content="MLJ">

        <!--
            Change log:
                10. August 2017  - created!
        -->

        <style>
          input {
            font-style: italic;
          }
          body {
            font-family: "Calibri";
          }
          .row {
            min-height: 10%;
          }
        </style>
        <!-- Bootstrap CSS -->
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/css/bootstrap.min.css" integrity="sha384-/Y6pD6FV/Vv2HJnA6t+vslU6fwYXjCFtcEpHbNJ0lyAFsXTsjBbfaDjzALeQsN6M" crossorigin="anonymous">
    </head>

    <body>
      <div class="container-fluid">
        <!--<div class="col-lg-4">-->
          <div class="row justify-content-center">
            <!--left column-->
            <div class="col-lg-4 col-xs-1 col-sm-1"></div>
            <div class="col-lg-4 col-xs-10 col-sm-10">Enter UPick type:</div>
            <!--right column-->
            <div class="col-lg-4 col-xs-1 col-sm-1"></div>
          </div>

          <div class="row justify-content-center">
            <!--left column-->
            <div class="col-lg-4 col-xs-1 col-sm-1"></div>
            <div class="col-lg-4 col-xs-10 col-sm-10">
              <input type="number" class="form-control input-lg" id="upickTypeID" placeholder="numbers only, please" autocomplete="off">
            </div>
            <!--right column-->
            <div class="col-lg-4 col-xs-1 col-sm-1"></div>
          </div>
          <div class="row justify-content-center">
            <!--left column-->
            <div class="col-lg-4 col-xs-1 col-sm-1"></div>
            <div class="col-lg-4 col-xs-10 col-sm-10">Upgrading from...</div>
            <!--right column-->
            <div class="col-lg-4 col-xs-1 col-sm-1"></div>
          </div>
          <div class="row justify-content-center">
            <!--left column-->
            <div class="col-lg-4 col-xs-1 col-sm-1"></div>
            <div class="col-lg-4 col-xs-10 col-sm-10">
              <input type="letter" class="form-control input-lg" id="origPriceTypeID" placeholder="price type letter" autocomplete='off'>
            </div>
            <!--right column-->
            <div class="col-lg-4 col-xs-1 col-sm-1"></div>
          </div>
          <div class="row justify-content-center">
            <!--left column-->
            <div class="col-lg-4 col-xs-1 col-sm-1"></div>
            <div class="col-lg-4 col-xs-10 col-sm-10">...to...</div>
            <!--right column-->
            <div class="col-lg-4 col-xs-1 col-sm-1"></div>
          </div>
          <div class="row justify-content-center">
            <!--left column-->
            <div class="col-lg-4 col-xs-1 col-sm-1"></div>
            <div class="col-lg-4 col-xs-10 col-sm-10">
              <input type="letter" class="form-control input-lg" id="upgradePriceTypeID" placeholder="price type letter" autocomplete='off'>
            </div>
            <!--right column-->
            <div class="col-lg-4 col-xs-1 col-sm-1"></div>
          </div>
          <div class="row justify-content-center">
            <!--left column-->
            <div class="col-lg-4 col-xs-1 col-sm-1"></div>
            <div class="col-lg-4 col-xs-10 col-sm-10">
              <div class="btn-group">
               <button type="button" class="btn btn-primary" id="button50" onclick="setDiscountAmount(50)">50% off</button>
               <button type="button" class="btn btn-primary" id="button25" onclick = "setDiscountAmount(25)">25% off</button>
               <button type="button" class="btn btn-primary" id="buttonNone" onclick = "setDiscountAmount(0)">None</button>
              </div>
            </div>
            <!--right column-->
            <div class="col-lg-4 col-xs-1 col-sm-1"></div>
          </div>
          <div class="row justify-content-center">
            <!--left column-->
            <div class="col-lg-4 col-xs-1 col-sm-1"></div>
            <div class="col-lg-4 col-xs-10 col-sm-10">
              <button type="button" id="calculateButton" class="btn btn-default" disabled>Calculate</button>
            </div>
            <!--right column-->
            <div class="col-lg-4 col-xs-1 col-sm-1"></div>
          </div>
          <div class="row justify-content-center">
            <!--left column-->
            <div class="col-lg-4 col-xs-1 col-sm-1"></div>
            <div class="col-lg-4 col-xs-10 col-sm-10" id="resultBox"></div>
            <!--right column-->
            <div class="col-lg-4 col-xs-1 col-sm-1"></div>
          </div>
        </div>


        <script>
            var upickType;
            var origPriceType;
            var upgradePriceType;
            var divisor = 0;
            //Sets of price tiers
            var u4 = {"A+":252.00,"A":237.60,"B":187.20,"C":108.00};
            var u6 = {"A+":357.00,"A":336.60,"B":265.20,"C":153.00};
            var u8 = {"A+":448.00,"A":422.40,"B":332.80,"C":192.00};
            var u10 = {"A+":560.00,"A":528.00,"B":416.00,"C":240.00}
            var prices = new Object();

            var mainProcedure = function() {
                upickType = document.getElementById("upickTypeID").value;

                //get proper dictionary in place
                if (upickType==4){
                  prices = u4;
                }
                else if (upickType==6){
                  prices = u6;
                }
                else if (upickType==8){
                  prices = u8;
                }
                else if (upickType==10){
                  prices = u10;
                }

                origPriceType = document.getElementById("origPriceTypeID").value;
                upgradePriceType = document.getElementById("upgradePriceTypeID").value;

                //capitalize letters for searching through Dictionary
                origPriceType = convertPriceTypeToCapital(origPriceType);
                upgradePriceType = convertPriceTypeToCapital(upgradePriceType);



                var old = (prices[origPriceType]/(upickType/divisor));
                var upgrade = (prices[upgradePriceType]/(upickType/divisor));


                //upgrade-old
                document.getElementById('resultBox').innerHTML = ("Difference of $" + (parseFloat(upgrade-old).toFixed(2)));
            }

            var setDiscountAmount = function(discountAmt) {
              console.log("inside of setDiscountAmount");
              document.getElementById('calculateButton').className = "btn btn-primary";

              document.getElementById('calculateButton').disabled = false;
              console.log("BENCHMARK");
              document.getElementById('button50').disabled = true;


              document.getElementById('button50').className = "btn btn-default";
              document.getElementById('button25').disabled = true;

              document.getElementById('button25').className = "btn btn-default";
              document.getElementById('buttonNone').disabled = true;

              document.getElementById('buttonNone').className = "btn btn-default";
              //get a nice decimal for dividing later (and eliminate div. by 0)
              if (discountAmt==0){
                divisor = 1.0;
                console.log("1 is the divisor");
              }
              else if (discountAmt==50) {
                divisor = 0.5;
                console.log(".5 is the divisor");
              }
              else if (discountAmt==25) {
                divisor = 0.75;
                console.log(".75 is the divisor");
              }

            }
            var convertPriceTypeToCapital = function(priceType) {
              if (priceType=="a+"){
                priceType="A+";
              }
              else if (priceType=="a"){
                priceType="A";
              }
              else if (priceType=="b"){
                priceType="B";
              }
              else if (priceType=="c"){
                priceType="C";
              }

              return priceType;
            }
            document.getElementById('calculateButton').onclick = mainProcedure;

/*            document.getElementById('button50').onclick = setDiscountAmount(50);
            document.getElementById('button25').onclick = setDiscountAmount(25);
            document.getElementById('buttonNone').onclick = setDiscountAmount(0);*/

        </script>
        <!-- Optional JavaScript -->
        <!-- jQuery first, then Popper.js, then Bootstrap JS -->
        <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/ulg/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta/js/bootstrap.min.js" integrity="sha384-h0AbiXch4ZDo7tp9hKZ4TsHbi047NrKGLO3SEJAg45jXxnGIfYzk4Si90RDIqNm1" crossorigin="anonymous"></script>

    </body>
</html>
